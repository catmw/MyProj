@page
@model IndexModel

<div class="row container pb-3 backgroundWhite">

	<p>
		<form class="d-flex" class="col-3">
			<input type="text" placeholder="Enter Book Name" class="form-control me-sm-2" asp-for="SearchString" />
			<input type="submit" value="Search" class="btn btn-outline" class="form-control align-content-end" />
			<a asp-route-Products="" asp-route-SearchString="" class="btn btn-outline-secondary">Clear</a>
		</form>
	</p>
	</br></br></br>

	@foreach (var genre in Model.listOfGenres)
	{
		<h2 class="text-success pl-1">@genre.Name</h2>
		<div class="col-12">
			<div class="row my-3">
				@foreach (var book in Model.listOfBooks.Where(p => p.GenreId == genre.Id))
				{
                    <div class="col-lg-4 col-md-6 pb-4 filter">
                        <div class="card bg-white rounded shadow-sm h-100" style="border:1px solid #222">
                            <div class="card-body pb-1 row">
                                <div class="col-8 h5 text-truncate">@book.Title</div>
                                <div class="col-4 text-end"><span class="text-info h4">@book.Price</span></div>
                            </div>

                            <img class="card-img-top img-fluid mx-auto mb-3" src="@book.ImageName" alt="Book Image">

                            <div class="card-body p-1 px-3 d-flex flex-column">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="badge border w-100 text-dark text-wrap text-break bg-warning">@book.Genre?.Name</span>
                                    <span class="badge bg-info border w-100 text-dark text-wrap text-break">@book.Title</span>
                                </div>

                                <p class="flex-grow-1">
                                    @book.Description
                                </p>

                                <a asp-page="Details" asp-route-id="@book.Id"
                                   class="btn btn-dark form-control btn-sm mt-auto p-2">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>

				}
			</div>
		</div>
	}

</div>	